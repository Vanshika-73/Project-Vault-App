{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./Login.css';import{useAuth0}from\"@auth0/auth0-react\";import{useNavigate}from'react-router-dom';import{addUserSignInDataToDB,checkUserExists}from'../../Service/api';import{useData}from'../../DataContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){const{loginWithPopup,isLoading,logout,isAuthenticated,user}=useAuth0();const navigate=useNavigate();const{lastPage}=useData();React.useEffect(()=>{if(isAuthenticated){handleAddSignInDataToDB();navigate(lastPage,{replace:true});}},[isAuthenticated]);React.useEffect(()=>{loginWithPopup();},[]);async function handleAddSignInDataToDB(){try{// check user exists or not in MongoDB\nconst data={};data['email']=user.email;const userState=await checkUserExists(data);if(!userState['exists'])await addUserSignInDataToDB(data);else console.log(\"User Existed.\");}catch(e){console.log(\"Some internal error occured.\");}}const handleBackToHome=()=>{navigate('/');};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-page-area\",children:[!isAuthenticated&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>loginWithPopup(),children:\"Login\"}),isAuthenticated&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleBackToHome(),children:\"Home\"})]})});}export default Login;","map":{"version":3,"names":["React","useState","useEffect","useAuth0","useNavigate","addUserSignInDataToDB","checkUserExists","useData","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","loginWithPopup","isLoading","logout","isAuthenticated","user","navigate","lastPage","handleAddSignInDataToDB","replace","data","email","userState","console","log","e","handleBackToHome","children","className","onClick"],"sources":["C:/Users/omsin/Desktop/Project Vault Main Folder/ProjectVault/projectvault/src/pages/Login/Login.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './Login.css';\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { addUserSignInDataToDB, checkUserExists } from '../../Service/api';\r\nimport { useData } from '../../DataContext';\r\n\r\nfunction Login() {\r\n    const { loginWithPopup, isLoading, logout, isAuthenticated, user } = useAuth0();\r\n    const navigate = useNavigate();\r\n    const { lastPage } = useData();\r\n\r\n    React.useEffect( () => {\r\n        if (isAuthenticated) {\r\n            handleAddSignInDataToDB();\r\n            navigate(lastPage, { replace: true });\r\n        }\r\n    }, [isAuthenticated]);\r\n\r\n    React.useEffect( () => {\r\n        loginWithPopup();\r\n    }, []);\r\n\r\n    async function handleAddSignInDataToDB(){\r\n        try{\r\n            // check user exists or not in MongoDB\r\n            const data={};\r\n            data['email']= user.email ;\r\n            const userState = await checkUserExists(data);\r\n            if(!userState['exists'])\r\n            await addUserSignInDataToDB(data);\r\n            else\r\n            console.log(\"User Existed.\");\r\n        }\r\n        catch(e)\r\n        {\r\n            console.log(\"Some internal error occured.\");\r\n        }\r\n    }\r\n    const handleBackToHome = () => {\r\n        navigate('/');\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className='login-page-area'>\r\n                { !isAuthenticated && <button onClick={()=> loginWithPopup()}>Login</button>}\r\n                { isAuthenticated && <button onClick={()=> handleBackToHome()}>Home</button>}\r\n            </div>\r\n            \r\n        </>\r\n    );\r\n}\r\n\r\nexport default Login;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,aAAa,CACpB,OAASC,QAAQ,KAAQ,oBAAoB,CAC7C,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,qBAAqB,CAAEC,eAAe,KAAQ,mBAAmB,CAC1E,OAASC,OAAO,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE5C,QAAS,CAAAC,KAAKA,CAAA,CAAG,CACb,KAAM,CAAEC,cAAc,CAAEC,SAAS,CAAEC,MAAM,CAAEC,eAAe,CAAEC,IAAK,CAAC,CAAGhB,QAAQ,CAAC,CAAC,CAC/E,KAAM,CAAAiB,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEiB,QAAS,CAAC,CAAGd,OAAO,CAAC,CAAC,CAE9BP,KAAK,CAACE,SAAS,CAAE,IAAM,CACnB,GAAIgB,eAAe,CAAE,CACjBI,uBAAuB,CAAC,CAAC,CACzBF,QAAQ,CAACC,QAAQ,CAAE,CAAEE,OAAO,CAAE,IAAK,CAAC,CAAC,CACzC,CACJ,CAAC,CAAE,CAACL,eAAe,CAAC,CAAC,CAErBlB,KAAK,CAACE,SAAS,CAAE,IAAM,CACnBa,cAAc,CAAC,CAAC,CACpB,CAAC,CAAE,EAAE,CAAC,CAEN,cAAe,CAAAO,uBAAuBA,CAAA,CAAE,CACpC,GAAG,CACC;AACA,KAAM,CAAAE,IAAI,CAAC,CAAC,CAAC,CACbA,IAAI,CAAC,OAAO,CAAC,CAAEL,IAAI,CAACM,KAAK,CACzB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAApB,eAAe,CAACkB,IAAI,CAAC,CAC7C,GAAG,CAACE,SAAS,CAAC,QAAQ,CAAC,CACvB,KAAM,CAAArB,qBAAqB,CAACmB,IAAI,CAAC,CAAC,IAElC,CAAAG,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,CAChC,CACA,MAAMC,CAAC,CACP,CACIF,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC,CAC/C,CACJ,CACA,KAAM,CAAAE,gBAAgB,CAAGA,CAAA,GAAM,CAC3BV,QAAQ,CAAC,GAAG,CAAC,CACjB,CAAC,CAED,mBACIX,IAAA,CAAAI,SAAA,EAAAkB,QAAA,cACIpB,KAAA,QAAKqB,SAAS,CAAC,iBAAiB,CAAAD,QAAA,EAC1B,CAACb,eAAe,eAAIT,IAAA,WAAQwB,OAAO,CAAEA,CAAA,GAAKlB,cAAc,CAAC,CAAE,CAAAgB,QAAA,CAAC,OAAK,CAAQ,CAAC,CAC1Eb,eAAe,eAAIT,IAAA,WAAQwB,OAAO,CAAEA,CAAA,GAAKH,gBAAgB,CAAC,CAAE,CAAAC,QAAA,CAAC,MAAI,CAAQ,CAAC,EAC3E,CAAC,CAER,CAAC,CAEX,CAEA,cAAe,CAAAjB,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}