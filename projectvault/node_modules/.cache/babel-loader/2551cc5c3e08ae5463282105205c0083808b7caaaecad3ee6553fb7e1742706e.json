{"ast":null,"code":"import'./UploadSuccess.css';import{useAuth0}from\"@auth0/auth0-react\";import{fetchAllProjectsOfUser,fetchProjectfromDB}from'../../Service/api';import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function UploadSuccess(){const imagePath=process.env.PUBLIC_URL+'/images/coverImage.png';const navigate=useNavigate();const{isAuthenticated,user}=useAuth0();const[project,setProject]=useState(null);const[flag,setFlag]=useState(true);useEffect(()=>{if((!project||project==null)&&isAuthenticated)fetchData();},[]);const fetchData=async()=>{const response=await fetchAllProjectsOfUser(user.email);try{const projectIDs=response.projects.documents;const ID=projectIDs[projectIDs.length-1];const projectResponse=await fetchProjectfromDB(ID);setProject(projectResponse.project);}catch(error){}};const handleProjectClick=()=>{navigate(\"/project?projectID=\".concat(project._id));};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"success-outer-div\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"success-message-div\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"success-message\",children:\"Your project has been successfully uploaded !\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"success-project-div\",children:[project&&/*#__PURE__*/_jsxs(\"div\",{className:\"success-project\",onClick:handleProjectClick,children:[/*#__PURE__*/_jsx(\"div\",{className:\"success-project-LHS\",children:project.coverphoto?/*#__PURE__*/_jsx(\"img\",{src:project.coverphoto}):/*#__PURE__*/_jsx(\"img\",{src:imagePath})}),/*#__PURE__*/_jsxs(\"div\",{className:\"success-project-RHS\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"project-title\",children:project.title}),/*#__PURE__*/_jsx(\"p\",{className:\"project-desc\",children:project.description.length>90?project.description.slice(0,90)+\"...\":project.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"project-price\",children:[\"\\u20B9\",project.price]}),/*#__PURE__*/_jsx(\"div\",{className:\"project-docs\",children:project.documents.map((docs,index)=>/*#__PURE__*/_jsxs(\"div\",{children:[index<2&&/*#__PURE__*/_jsx(\"div\",{className:\"project-doc\",children:/*#__PURE__*/_jsx(\"p\",{children:docs.key})}),index==2&&/*#__PURE__*/_jsx(\"div\",{className:\"project-doc\",children:/*#__PURE__*/_jsx(\"p\",{children:\"...\"})})]},index))})]})]}),!project&&/*#__PURE__*/_jsxs(\"div\",{className:\"project-reload\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Cannot load project at the moment\"}),/*#__PURE__*/_jsx(\"button\",{className:\"load-button\",onClick:fetchData,children:\" Reload \"})]})]})]})});}export default UploadSuccess;","map":{"version":3,"names":["useAuth0","fetchAllProjectsOfUser","fetchProjectfromDB","React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UploadSuccess","imagePath","process","env","PUBLIC_URL","navigate","isAuthenticated","user","project","setProject","flag","setFlag","fetchData","response","email","projectIDs","projects","documents","ID","length","projectResponse","error","handleProjectClick","concat","_id","children","className","onClick","coverphoto","src","title","description","slice","price","map","docs","index","key"],"sources":["C:/Users/omsin/Desktop/Project Vault Main Folder/ProjectVault/projectvault/src/pages/UploadSuccess/UploadSuccess.jsx"],"sourcesContent":["import './UploadSuccess.css';\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport { fetchAllProjectsOfUser, fetchProjectfromDB } from '../../Service/api';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction UploadSuccess() {\r\n  const imagePath = process.env.PUBLIC_URL + '/images/coverImage.png';\r\n  const navigate = useNavigate();\r\n  const { isAuthenticated, user } = useAuth0();\r\n  const [project, setProject] = useState(null);\r\n  const [flag, setFlag] = useState(true);\r\n  useEffect(()=>{\r\n    if( ( !project || project==null) && isAuthenticated )\r\n      fetchData();\r\n  },[]);\r\n\r\n  const fetchData = async () => {\r\n    const response = await fetchAllProjectsOfUser(user.email);\r\n    try {\r\n      const projectIDs=response.projects.documents;\r\n      const ID = projectIDs[projectIDs.length-1];\r\n      const projectResponse = await fetchProjectfromDB(ID);\r\n      setProject(projectResponse.project);\r\n    } catch (error) {}      \r\n  };\r\n\r\n  const handleProjectClick = () => {\r\n    navigate(`/project?projectID=${project._id}`);\r\n  };\r\n  return (\r\n    <>\r\n      <div className='success-outer-div'>\r\n        <div className='success-message-div'>\r\n          <h1 className='success-message'>Your project has been successfully uploaded !</h1>\r\n        </div>\r\n        <div className='success-project-div'>\r\n          { project && \r\n            <div className='success-project' onClick={handleProjectClick}>\r\n              <div className='success-project-LHS'>\r\n                { project.coverphoto \r\n                  ? <img src={project.coverphoto} />\r\n                  : <img src={imagePath} />\r\n                }\r\n              </div>\r\n              <div className='success-project-RHS'>\r\n                <p className='project-title'>{project.title}</p>\r\n                <p className='project-desc'>\r\n                  {project.description.length > 90 ? project.description.slice(0, 90)+\"...\" : project.description}\r\n                </p>\r\n                <p className='project-price'>â‚¹{project.price}</p>\r\n                <div className='project-docs'>\r\n                  {project.documents.map((docs,index) => (\r\n                    <div key={index}>\r\n                      { index<2 && <div className='project-doc'><p>{docs.key}</p></div>}\r\n                      { index==2 && <div className='project-doc'><p>...</p></div>}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          }\r\n          { !project &&\r\n            <div className='project-reload'>\r\n              <p>Cannot load project at the moment</p>\r\n              <button className='load-button' onClick={fetchData} > Reload </button>\r\n            </div>\r\n          }\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UploadSuccess;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}