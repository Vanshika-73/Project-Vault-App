{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import'./ProjectList.css';import{useLocation}from'react-router-dom';import{useNavigate}from'react-router-dom';import{fetchProjectList}from'../../Service/api';import{ThreeDots}from'react-loader-spinner';import{useAuth0}from\"@auth0/auth0-react\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ProjectList(){const notFoundImagePath=process.env.PUBLIC_URL+'/images/not-found.jpg';const{isAuthenticated,loginWithPopup}=useAuth0();const navigate=useNavigate();const{search}=useLocation();const queryParams=new URLSearchParams(search);const selectedDomain=queryParams.get('domain');const selectedTopic=queryParams.get('topic');const[projectList,setProjectList]=useState([]);const[loader,setLoader]=useState(true);const[maxTags,setMaxTags]=useState(window.innerWidth>600?5:2);const[screenWidth,setScreenWidth]=useState(window.innerWidth);const handleResize=()=>{setScreenWidth(window.innerWidth);handleSetTags();};useEffect(()=>{window.addEventListener('resize',handleResize);return()=>{window.removeEventListener('resize',handleResize);};},[]);useEffect(()=>{handleCallProjectList();},[]);const handleSetTags=()=>{if(window.innerWidth<=600)setMaxTags(2);else setMaxTags(5);};const handleCallProjectList=async()=>{try{const response=await fetchProjectList(selectedDomain,selectedTopic);const prr=response.projects;for(var i=0;i<prr.length;i++){const arr=prr[i].rating;var c=0;for(var j=0;j<arr.length;j++){c=c+arr[j].rate;}if(arr.length!=0)c=c/arr.length;prr[i].rate=c;}setProjectList(prr);}catch(error){}setLoader(false);};const handleProjectClick=project=>{navigate(\"/project?projectID=\".concat(project._id));};const handleSellButton=()=>{navigate(\"/addproject\");};const handleLoginButton=()=>{loginWithPopup();};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"heading\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[selectedDomain,\" Projects\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[selectedTopic,\" Topic\"]})]}),!loader&&projectList.length>0&&projectList.map(project=>/*#__PURE__*/_jsxs(\"div\",{className:\"project-box\",onClick:()=>handleProjectClick(project),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"LHS\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"project-title-image\",children:[/*#__PURE__*/_jsx(\"img\",{src:project.coverphoto}),/*#__PURE__*/_jsx(\"div\",{className:\"price-body\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strike\",{children:project.price}),\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Free\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"project-title-text\",children:[/*#__PURE__*/_jsx(\"h3\",{children:project.title}),screenWidth<=600&&/*#__PURE__*/_jsx(\"p\",{children:project.description.length>100?project.description.slice(0,100)+\"...\":project.description}),screenWidth>600&&/*#__PURE__*/_jsx(\"p\",{children:project.description.length>250?project.description.slice(0,250)+\"...\":project.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"av-docs\",children:[project.documents.map((docs,index)=>/*#__PURE__*/_jsx(\"div\",{children:index<maxTags&&/*#__PURE__*/_jsx(\"div\",{className:\"doc\",children:/*#__PURE__*/_jsx(\"p\",{children:docs.key})})},docs.value)),project.documents.length>maxTags&&/*#__PURE__*/_jsx(\"div\",{children:\"...\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"RHS\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"star\",children:\"\\u2605\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rating\",children:/*#__PURE__*/_jsxs(\"p\",{children:[project.rate,\"/5\"]})})]})]},project._id)),loader&&/*#__PURE__*/_jsx(\"div\",{className:\"loader-message\",children:/*#__PURE__*/_jsx(ThreeDots,{color:\"#000000\",height:50,width:50})}),!loader&&projectList.length==0&&/*#__PURE__*/_jsx(\"div\",{className:\"no-project-message\",children:/*#__PURE__*/_jsx(\"img\",{src:notFoundImagePath})}),/*#__PURE__*/_jsxs(\"div\",{className:\"body-div3\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"body-div-headings\",children:\"Want to earn from your own projects ?\"}),!isAuthenticated&&/*#__PURE__*/_jsx(\"button\",{className:\"sell-button\",onClick:handleLoginButton,children:\"Login to Sell\"}),isAuthenticated&&/*#__PURE__*/_jsx(\"button\",{className:\"sell-button\",onClick:handleSellButton,children:\"Sell your Project\"})]})]});}export default ProjectList;","map":{"version":3,"names":["React","useState","useEffect","useRef","useLocation","useNavigate","fetchProjectList","ThreeDots","useAuth0","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","ProjectList","notFoundImagePath","process","env","PUBLIC_URL","isAuthenticated","loginWithPopup","navigate","search","queryParams","URLSearchParams","selectedDomain","get","selectedTopic","projectList","setProjectList","loader","setLoader","maxTags","setMaxTags","window","innerWidth","screenWidth","setScreenWidth","handleResize","handleSetTags","addEventListener","removeEventListener","handleCallProjectList","response","prr","projects","i","length","arr","rating","c","j","rate","error","handleProjectClick","project","concat","_id","handleSellButton","handleLoginButton","children","className","map","onClick","src","coverphoto","price","title","description","slice","documents","docs","index","key","value","color","height","width"],"sources":["C:/Users/omsin/Desktop/Project Vault Main Folder/ProjectVault/projectvault/src/pages/ProjectList/ProjectList.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport './ProjectList.css';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { fetchProjectList } from '../../Service/api';\r\nimport { ThreeDots    } from 'react-loader-spinner';\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\n\r\nfunction ProjectList() {\r\n  const notFoundImagePath = process.env.PUBLIC_URL + '/images/not-found.jpg';\r\n  const { isAuthenticated, loginWithPopup } = useAuth0();\r\n  const navigate = useNavigate();\r\n  const { search } = useLocation();\r\n  const queryParams = new URLSearchParams(search);\r\n  const selectedDomain = queryParams.get('domain');\r\n  const selectedTopic = queryParams.get('topic');\r\n  const [projectList, setProjectList] = useState([]);\r\n  const [loader, setLoader] = useState(true);\r\n  const [maxTags, setMaxTags] = useState(window.innerWidth>600 ? 5 : 2);\r\n  const [screenWidth, setScreenWidth] = useState(window.innerWidth);\r\n\r\n  const handleResize = () => {\r\n    setScreenWidth(window.innerWidth);\r\n    handleSetTags();\r\n  };\r\n  useEffect(() => {\r\n    window.addEventListener('resize', handleResize);\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n    };\r\n  }, []);\r\n  useEffect(() => {\r\n    handleCallProjectList();\r\n  }, []);\r\n  const handleSetTags = ()=> {\r\n    if(window.innerWidth<=600)\r\n      setMaxTags(2);\r\n    else\r\n      setMaxTags(5);\r\n  };\r\n  const handleCallProjectList = async () => {\r\n    try {\r\n      const response = await fetchProjectList(selectedDomain,selectedTopic);\r\n      const prr=response.projects;\r\n      \r\n      for( var i=0 ; i<prr.length ; i++ )\r\n      {\r\n        const arr = prr[i].rating;\r\n        var c=0;\r\n        for( var j=0 ; j<arr.length ; j++ )\r\n        {\r\n          c=c+arr[j].rate;\r\n        }\r\n        if(arr.length!=0)\r\n        c=c/arr.length;\r\n        prr[i].rate=c;\r\n      }\r\n      setProjectList(prr);\r\n\r\n    } catch (error) {}\r\n    setLoader(false);\r\n  };\r\n  const handleProjectClick = (project) => {\r\n    navigate(`/project?projectID=${project._id}`);\r\n  };\r\n  const handleSellButton = () => {\r\n    navigate(`/addproject`);\r\n  };\r\n  const handleLoginButton = () => {\r\n    loginWithPopup();\r\n  };\r\n\r\n\r\n  return (\r\n    <>\r\n      <div className='heading'>\r\n        <h2>{selectedDomain} Projects</h2>\r\n        <p>{selectedTopic} Topic</p> \r\n      </div>\r\n\r\n      { !loader && projectList.length>0 && projectList.map((project) => (\r\n        <div className='project-box' key={project._id} onClick={() => handleProjectClick(project)}>\r\n        <div className='LHS'>\r\n          <div className='project-title-image'>\r\n            <img src={project.coverphoto} />\r\n            <div className='price-body'>\r\n              <p><strike>{project.price}</strike> <b>Free</b></p>\r\n            </div>\r\n          </div>\r\n          <div className='project-title-text'>\r\n            <h3>{project.title}</h3>\r\n            { screenWidth<=600 && \r\n              <p>{project.description.length > 100 ? project.description.slice(0, 100)+\"...\" : project.description}</p>\r\n            }\r\n            { screenWidth>600 && \r\n              <p>{project.description.length > 250 ? project.description.slice(0, 250)+\"...\" : project.description}</p>\r\n            }\r\n            <div className='av-docs'>\r\n              {project.documents.map((docs,index) => (\r\n                <div key={docs.value}>\r\n                  { index<maxTags && <div className='doc'><p>{docs.key}</p></div>}\r\n                </div>\r\n              ))}\r\n              { project.documents.length>maxTags && \r\n                <div>...</div>\r\n              }\r\n            </div>\r\n          </div>\r\n          \r\n        </div>\r\n        <div className='RHS'>\r\n          <div className='star'>&#9733;</div>\r\n          <div className='rating'>\r\n            <p>{project.rate}/5</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      ))}\r\n      { loader &&\r\n        <div className='loader-message'>\r\n          <ThreeDots \r\n            color=\"#000000\"\r\n            height={50}\r\n            width={50}\r\n          />\r\n        </div>\r\n      }\r\n      { !loader && projectList.length==0 &&\r\n        <div className='no-project-message'>\r\n          <img src={notFoundImagePath} />\r\n        </div>\r\n      }\r\n      <div className='body-div3'>\r\n        <h2 className='body-div-headings'>Want to earn from your own projects ?</h2>\r\n        { !isAuthenticated &&\r\n          <button className='sell-button' onClick={handleLoginButton}>Login to Sell</button>\r\n        }\r\n        { isAuthenticated &&\r\n          <button className='sell-button' onClick={handleSellButton}>Sell your Project</button>\r\n        }\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ProjectList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}